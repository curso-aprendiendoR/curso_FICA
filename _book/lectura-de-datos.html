<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capitulo6 Lectura de Datos | APRENDIENDO R</title>
<meta name="author" content="Paola Guerrero">
<meta name="description" content="En este capítulo revisaremos una tabla de datos extensa de la cual obtendremos varios resultados con varias herramientas que ya conocemos y algunas nuevas R contiene una librería con datos reales...">
<meta name="generator" content="bookdown 0.40 with bs4_book()">
<meta property="og:title" content="Capitulo6 Lectura de Datos | APRENDIENDO R">
<meta property="og:type" content="book">
<meta property="og:description" content="En este capítulo revisaremos una tabla de datos extensa de la cual obtendremos varios resultados con varias herramientas que ya conocemos y algunas nuevas R contiene una librería con datos reales...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capitulo6 Lectura de Datos | APRENDIENDO R">
<meta name="twitter:description" content="En este capítulo revisaremos una tabla de datos extensa de la cual obtendremos varios resultados con varias herramientas que ya conocemos y algunas nuevas R contiene una librería con datos reales...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/Sen-0.4.9/font.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=DM%20Mono&amp;display=swap" rel="stylesheet">
<link href="libs/Bitter-0.4.9/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.8.0/transition.js"></script><script src="libs/bs3compat-0.8.0/tabs.js"></script><script src="libs/bs3compat-0.8.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">APRENDIENDO R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introducción</a></li>
<li class="book-part">Antes de Empezar</li>
<li><a class="" href="instalaci%C3%B3n.html"><span class="header-section-number">1</span> Instalación</a></li>
<li><a class="" href="interfaz-de-rstudio.html"><span class="header-section-number">2</span> Interfaz de RStudio</a></li>
<li class="book-part">Primeros Pasos: Variables y Lectura de Datos</li>
<li><a class="" href="variables.html"><span class="header-section-number">3</span> Variables</a></li>
<li><a class="" href="vectores.html"><span class="header-section-number">4</span> Vectores</a></li>
<li><a class="" href="data-frames.html"><span class="header-section-number">5</span> Data Frames</a></li>
<li><a class="active" href="lectura-de-datos.html"><span class="header-section-number">6</span> Lectura de Datos</a></li>
<li class="book-part">Facilitando el trabajo: Flujo del programa y Estructuras de Control</li>
<li><a class="" href="funciones-b%C3%A1sicas.html"><span class="header-section-number">7</span> Funciones básicas</a></li>
<li><a class="" href="condicional-if---else.html"><span class="header-section-number">8</span> Condicional IF - ELSE</a></li>
<li><a class="" href="estructuras-de-control-bucles.html"><span class="header-section-number">9</span> Estructuras de Control: Bucles</a></li>
<li><a class="" href="funciones-de-la-familia-apply.html"><span class="header-section-number">10</span> Funciones de la familia Apply</a></li>
<li><a class="" href="gr%C3%A1ficos-con-ggplot-2.html"><span class="header-section-number">11</span> Gráficos con ggplot 2</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/curso-aprendiendoR/curso_FICA.git">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="lectura-de-datos" class="section level1" number="6">
<h1>
<span class="header-section-number">Capitulo6</span> Lectura de Datos<a class="anchor" aria-label="anchor" href="#lectura-de-datos"><i class="fas fa-link"></i></a>
</h1>
<p>En este capítulo revisaremos una tabla de datos extensa de la cual obtendremos varios resultados con varias herramientas que ya conocemos y algunas nuevas</p>
<p>R contiene una librería con datos reales que pueden ser usados, para acceder a ella debemos instalar el paquete <strong>datasets</strong> y escribir el comando <code>datasets::</code>y pulsar el tabulador; esta librería te será muy útil para practicar.</p>
<p>En esta clase no utilizaremos los datos de la librería de <code>R</code>, sino que cargaremos un documento tipo csv de datos de becarios del SENECYT.</p>
<p>Para cargar datos csv en <code>R</code> escribimos el comando <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>, en el argumento colocaremos el directorio del archivo, sin embargo si el archivo se encuentra en la misma carpeta del proyecto basta con colocar el nombre del archivo y la extensión del mismo.</p>
<p>Ahora si el archivo de datos es de tipo <strong>xlsx</strong> primero deberás instalar el paquete <code>readxl</code> y ejecutar el comando <code>read_excel()</code></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Carguemos y almacenemos el archivo</span></span>
<span><span class="va">incendio</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"./documentos/maate_incendio.csv"</span><span class="op">)</span></span></code></pre></div>
<p>Si queremos observar la tabla de datos podemos acceder a través del panel de entorno o con el comando <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code></p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span></span></code></pre></div>
<p>Si quisiéramos ver parcialmente la información que tenemos podemos visualizar las 6 primeras filas de datos con el comando <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>, también podemos visualizar las 6 últimas filas con el comando <code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code>.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visualización de las 6 primeras filas de datos</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ANIO_REPORT DPA_PROVIN PROVINCIA DPA_CANTON  CANTON</span></span>
<span><span class="co">#&gt; 1        2022         17 PICHINCHA       1701   QUITO</span></span>
<span><span class="co">#&gt; 2        2022         17 PICHINCHA       1701   QUITO</span></span>
<span><span class="co">#&gt; 3        2022         17 PICHINCHA       1701   QUITO</span></span>
<span><span class="co">#&gt; 4        2022         17 PICHINCHA       1702 CAYAMBE</span></span>
<span><span class="co">#&gt; 5        2022         11      LOJA       1101    LOJA</span></span>
<span><span class="co">#&gt; 6        2022          7    EL ORO        705  CHILLA</span></span>
<span><span class="co">#&gt;   DPA_PARROQ PARROQUIA            EVENTO CAT_EVENTO</span></span>
<span><span class="co">#&gt; 1     170175      PIFO INCENDIO FORESTAL  Antropico</span></span>
<span><span class="co">#&gt; 2     170175      PIFO INCENDIO FORESTAL  Antropico</span></span>
<span><span class="co">#&gt; 3     170175      PIFO INCENDIO FORESTAL  Antropico</span></span>
<span><span class="co">#&gt; 4     170252  CANGAHUA INCENDIO FORESTAL  Antropico</span></span>
<span><span class="co">#&gt; 5     110151  CHANTACO INCENDIO FORESTAL  Antropico</span></span>
<span><span class="co">#&gt; 6      70550    CHILLA INCENDIO FORESTAL Epoca seca</span></span>
<span><span class="co">#&gt;   ALERTA_FECHA MES NIVEL_INF CALIF_EVEN CAT_CRUCE</span></span>
<span><span class="co">#&gt; 1    9/19/2021   9   Nivel 1    Nivel 1       aph</span></span>
<span><span class="co">#&gt; 2    9/10/2021   9   Nivel 1    Nivel 1       aph</span></span>
<span><span class="co">#&gt; 3    9/24/2021   9   Nivel 1    Nivel 1       aph</span></span>
<span><span class="co">#&gt; 4    9/23/2021   9   Nivel 2    Nivel 2       aph</span></span>
<span><span class="co">#&gt; 5    9/14/2021   9   Nivel 3    Nivel 1       bvp</span></span>
<span><span class="co">#&gt; 6    8/27/2021   8   Nivel 3    Nivel 2       bvp</span></span>
<span><span class="co">#&gt;                                NAM AREA_HA</span></span>
<span><span class="co">#&gt; 1                 PONCE PALUGUILLO      10</span></span>
<span><span class="co">#&gt; 2                 PONCE PALUGUILLO     100</span></span>
<span><span class="co">#&gt; 3                 PONCE PALUGUILLO      10</span></span>
<span><span class="co">#&gt; 4                          KAYAMBI      20</span></span>
<span><span class="co">#&gt; 5 CUENCA DEL RIO MALACATOS EN LOJA     140</span></span>
<span><span class="co">#&gt; 6                          CASACAY     140</span></span>
<span></span>
<span><span class="co">#Visualización de las últimas 6 filas y columnas 7, 9 y 16</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>,<span class="fl">9</span>,<span class="fl">16</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;     PARROQUIA CAT_EVENTO AREA_HA</span></span>
<span><span class="co">#&gt; 58  SAN JOSE   Antropico    1230</span></span>
<span><span class="co">#&gt; 59 SAN MIGUEL  Antropico      10</span></span>
<span><span class="co">#&gt; 60 SAN MIGUEL  Antropico    1500</span></span>
<span><span class="co">#&gt; 61    CAYAMBE  Antropico     100</span></span>
<span><span class="co">#&gt; 62     TUFINO  Antropico     750</span></span>
<span><span class="co">#&gt; 63     TUFINO  Antropico     750</span></span></code></pre></div>
<p>El comando <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> es una excelente manera de hacer una inspección inicial de una base de datos, este comando permite obtener un resumen de la información a través de un reporte de estadística descriptiva</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ANIO_REPORT     DPA_PROVIN      PROVINCIA        </span></span>
<span><span class="co">#&gt;  Min.   :2022   Min.   : 1.000   Length:63         </span></span>
<span><span class="co">#&gt;  1st Qu.:2022   1st Qu.: 3.000   Class :character  </span></span>
<span><span class="co">#&gt;  Median :2022   Median : 9.000   Mode  :character  </span></span>
<span><span class="co">#&gt;  Mean   :2022   Mean   : 9.651                     </span></span>
<span><span class="co">#&gt;  3rd Qu.:2022   3rd Qu.:17.000                     </span></span>
<span><span class="co">#&gt;  Max.   :2022   Max.   :18.000                     </span></span>
<span><span class="co">#&gt;                                                    </span></span>
<span><span class="co">#&gt;    DPA_CANTON      CANTON            DPA_PARROQ    </span></span>
<span><span class="co">#&gt;  Min.   : 101   Length:63          Min.   : 10154  </span></span>
<span><span class="co">#&gt;  1st Qu.: 302   Class :character   1st Qu.: 30252  </span></span>
<span><span class="co">#&gt;  Median : 901   Mode  :character   Median : 90112  </span></span>
<span><span class="co">#&gt;  Mean   : 967                      Mean   : 96747  </span></span>
<span><span class="co">#&gt;  3rd Qu.:1701                      3rd Qu.:170160  </span></span>
<span><span class="co">#&gt;  Max.   :1808                      Max.   :180856  </span></span>
<span><span class="co">#&gt;                                                    </span></span>
<span><span class="co">#&gt;   PARROQUIA            EVENTO           CAT_EVENTO       </span></span>
<span><span class="co">#&gt;  Length:63          Length:63          Length:63         </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;  ALERTA_FECHA            MES          NIVEL_INF        </span></span>
<span><span class="co">#&gt;  Length:63          Min.   : 2.000   Length:63         </span></span>
<span><span class="co">#&gt;  Class :character   1st Qu.: 8.000   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Median : 9.000   Mode  :character  </span></span>
<span><span class="co">#&gt;                     Mean   : 8.683                     </span></span>
<span><span class="co">#&gt;                     3rd Qu.:10.000                     </span></span>
<span><span class="co">#&gt;                     Max.   :12.000                     </span></span>
<span><span class="co">#&gt;                                                        </span></span>
<span><span class="co">#&gt;   CALIF_EVEN         CAT_CRUCE             NAM           </span></span>
<span><span class="co">#&gt;  Length:63          Length:63          Length:63         </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;     AREA_HA      </span></span>
<span><span class="co">#&gt;  Min.   :  10.0  </span></span>
<span><span class="co">#&gt;  1st Qu.:  10.0  </span></span>
<span><span class="co">#&gt;  Median :  10.0  </span></span>
<span><span class="co">#&gt;  Mean   : 112.7  </span></span>
<span><span class="co">#&gt;  3rd Qu.:  30.0  </span></span>
<span><span class="co">#&gt;  Max.   :1500.0  </span></span>
<span><span class="co">#&gt;  NA's   :4</span></span></code></pre></div>
<p>Ahora revisemos la dimensión de la tabla de datos <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code>. ¿Cuántos registos tengo (número de filas) <code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code> y cuantas variables registradas (número de columnas) <code><a href="https://rdrr.io/r/base/nrow.html">ncol()</a></code>? y ¿si quiesiera saber el nombre de las variables <code><a href="https://rdrr.io/r/base/colnames.html">colnames()</a></code>?</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 63 16</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 63</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 16</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "ANIO_REPORT"  "DPA_PROVIN"   "PROVINCIA"   </span></span>
<span><span class="co">#&gt;  [4] "DPA_CANTON"   "CANTON"       "DPA_PARROQ"  </span></span>
<span><span class="co">#&gt;  [7] "PARROQUIA"    "EVENTO"       "CAT_EVENTO"  </span></span>
<span><span class="co">#&gt; [10] "ALERTA_FECHA" "MES"          "NIVEL_INF"   </span></span>
<span><span class="co">#&gt; [13] "CALIF_EVEN"   "CAT_CRUCE"    "NAM"         </span></span>
<span><span class="co">#&gt; [16] "AREA_HA"</span></span></code></pre></div>
<p>Ahora modifiquemos nuestro data frame de ejemplo para dejar únicamente las variables más relevantes</p>
<p>Vamos a eliminar todos los datos de la operadora y practicaremos varias maneras de realizarlo.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Vamos con la más sencilla</span></span>
<span><span class="va">incendio</span><span class="op">&lt;-</span> <span class="va">incendio</span><span class="op">[</span>,<span class="op">-</span><span class="fl">11</span><span class="op">]</span></span></code></pre></div>
<p>Ahora practicaremos un comando de mucha utilidad <code><a href="https://rdrr.io/r/base/which.html">which()</a></code> este comando nos permite encontrar índices (es decir el número de orden) correspondientes a variables que cumplan con ciertas caracteríticas.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span><span class="op">==</span><span class="st">"DPA_PROVIN"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span></span>
<span><span class="co">#Ahora vamos a eliminar esta columna</span></span>
<span><span class="co">#Primero almacenaré el índice de la variable a eliminar</span></span>
<span><span class="va">borrar</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span><span class="op">==</span><span class="st">"DPA_PROVIN"</span><span class="op">)</span></span>
<span><span class="co">#Ahora eliminamos la columna DPA_PROVIN</span></span>
<span><span class="va">incendio</span><span class="op">&lt;-</span> <span class="va">incendio</span><span class="op">[</span>,<span class="op">-</span><span class="va">borrar</span><span class="op">]</span></span></code></pre></div>
<p>Ahora eliminaremos las columnas que en el nombre tengan la palabra OPERADORA. Utilizaremos el comando <code><a href="https://rdrr.io/r/base/grep.html">grepl()</a></code>, este comando busca comulnas con una caracteritica especifica, en el argumento colocaremos dos items:
1. El patrón a buscar
2. En donde buscarmenos el patrón</p>
<p><strong>grepl</strong> nos dará como resultado una veariable lógica indicándonos si cumple o no con la condición. Si observas bien el caso en el que borramos la columna TIPO_OPERADORA, te darás cuenta que antes de encontrar el índice encontramos un valor lógico. De manera similar realizaremos este caso</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Vamos paso a paso</span></span>
<span><span class="co">#Primero obtendremos la variable lógica </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"dpa"</span>, <span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span>, </span>
<span>      ignore.case <span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE</span></span>
<span><span class="co">#&gt; [10] FALSE FALSE FALSE FALSE FALSE</span></span>
<span><span class="co">#He colocado un tercer item para indicar que no considere mayúsculas y minúsculas</span></span>
<span></span>
<span><span class="co">#Ahora buscaremos el indicador y lo almacenaremos</span></span>
<span><span class="va">borrar_2</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"dpa"</span>,<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span>, ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Finalmente lo eliminaremos</span></span>
<span><span class="va">incendio</span><span class="op">&lt;-</span> <span class="va">incendio</span><span class="op">[</span>,<span class="op">-</span><span class="va">borrar_2</span><span class="op">]</span></span>
<span></span>
<span><span class="co">#Hasta ahora el data frame se ve así</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ANIO_REPORT PROVINCIA  CANTON PARROQUIA            EVENTO</span></span>
<span><span class="co">#&gt; 1        2022 PICHINCHA   QUITO      PIFO INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt; 2        2022 PICHINCHA   QUITO      PIFO INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt; 3        2022 PICHINCHA   QUITO      PIFO INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt; 4        2022 PICHINCHA CAYAMBE  CANGAHUA INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt; 5        2022      LOJA    LOJA  CHANTACO INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt; 6        2022    EL ORO  CHILLA    CHILLA INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt;   CAT_EVENTO ALERTA_FECHA NIVEL_INF CALIF_EVEN CAT_CRUCE</span></span>
<span><span class="co">#&gt; 1  Antropico    9/19/2021   Nivel 1    Nivel 1       aph</span></span>
<span><span class="co">#&gt; 2  Antropico    9/10/2021   Nivel 1    Nivel 1       aph</span></span>
<span><span class="co">#&gt; 3  Antropico    9/24/2021   Nivel 1    Nivel 1       aph</span></span>
<span><span class="co">#&gt; 4  Antropico    9/23/2021   Nivel 2    Nivel 2       aph</span></span>
<span><span class="co">#&gt; 5  Antropico    9/14/2021   Nivel 3    Nivel 1       bvp</span></span>
<span><span class="co">#&gt; 6 Epoca seca    8/27/2021   Nivel 3    Nivel 2       bvp</span></span>
<span><span class="co">#&gt;                                NAM AREA_HA</span></span>
<span><span class="co">#&gt; 1                 PONCE PALUGUILLO      10</span></span>
<span><span class="co">#&gt; 2                 PONCE PALUGUILLO     100</span></span>
<span><span class="co">#&gt; 3                 PONCE PALUGUILLO      10</span></span>
<span><span class="co">#&gt; 4                          KAYAMBI      20</span></span>
<span><span class="co">#&gt; 5 CUENCA DEL RIO MALACATOS EN LOJA     140</span></span>
<span><span class="co">#&gt; 6                          CASACAY     140</span></span></code></pre></div>
<p>Recordemos que cuando observamos el resumen de variables nos indicaba que la fecha es tipo caracter, vamos a cambiar a tipo fecha, agregaremos una columna de hora que importaremos de un archivo csv y uniremos estas dos variables en una sola columna. Aquí practicaremos como agregar una nueva columna al data frame, uniremos dos datos en una sola columna, transformaremos a fecha y eliminaremos las columnas que ya han sido unificadas.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#cargamos un archivo tipo csv en un nuevo data frame</span></span>
<span><span class="va">Hora</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"./documentos/hora.csv"</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#Unimos dos data frame</span></span>
<span><span class="va">incendio</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">incendio</span>,<span class="va">Hora</span><span class="op">)</span></span>
<span><span class="co">#Cambiamos el nombre de la columna agregada</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span><span class="op">[</span><span class="fl">13</span><span class="op">]</span><span class="op">&lt;-</span> <span class="st">"ALERTA_HORA"</span></span>
<span><span class="va">incendio</span><span class="op">$</span><span class="va">Fecha_Hora</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">$</span><span class="va">ALERTA_FECHA</span>, <span class="va">incendio</span><span class="op">$</span><span class="va">ALERTA_HORA</span><span class="op">)</span></span>
<span><span class="va">incendio</span><span class="op">$</span><span class="va">Fecha_Hora</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html">as.POSIXct</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">$</span><span class="va">Fecha_Hora</span>, format<span class="op">=</span> <span class="st">"%m/%d/%Y %H:%M:%OS"</span><span class="op">)</span></span>
<span><span class="co">#Borraremos las columnas que ya no necesitamos</span></span>
<span><span class="va">incendio</span><span class="op">&lt;-</span> <span class="va">incendio</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"ALERTA"</span>,<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p>Observe que cuando eliminamos las columnas de fecha y hora, a la estructura le agregamos <strong>!</strong> y si somos observadores también identificaremos que quitamos <strong>-</strong>; esto se debe a que el signo <strong>!</strong> es utilizado como negación.</p>
<p>¿Cómo ha quedado el data frame hasta el momento?</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ANIO_REPORT PROVINCIA  CANTON PARROQUIA            EVENTO</span></span>
<span><span class="co">#&gt; 1        2022 PICHINCHA   QUITO      PIFO INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt; 2        2022 PICHINCHA   QUITO      PIFO INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt; 3        2022 PICHINCHA   QUITO      PIFO INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt; 4        2022 PICHINCHA CAYAMBE  CANGAHUA INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt; 5        2022      LOJA    LOJA  CHANTACO INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt; 6        2022    EL ORO  CHILLA    CHILLA INCENDIO FORESTAL</span></span>
<span><span class="co">#&gt;   CAT_EVENTO NIVEL_INF CALIF_EVEN CAT_CRUCE</span></span>
<span><span class="co">#&gt; 1  Antropico   Nivel 1    Nivel 1       aph</span></span>
<span><span class="co">#&gt; 2  Antropico   Nivel 1    Nivel 1       aph</span></span>
<span><span class="co">#&gt; 3  Antropico   Nivel 1    Nivel 1       aph</span></span>
<span><span class="co">#&gt; 4  Antropico   Nivel 2    Nivel 2       aph</span></span>
<span><span class="co">#&gt; 5  Antropico   Nivel 3    Nivel 1       bvp</span></span>
<span><span class="co">#&gt; 6 Epoca seca   Nivel 3    Nivel 2       bvp</span></span>
<span><span class="co">#&gt;                                NAM AREA_HA</span></span>
<span><span class="co">#&gt; 1                 PONCE PALUGUILLO      10</span></span>
<span><span class="co">#&gt; 2                 PONCE PALUGUILLO     100</span></span>
<span><span class="co">#&gt; 3                 PONCE PALUGUILLO      10</span></span>
<span><span class="co">#&gt; 4                          KAYAMBI      20</span></span>
<span><span class="co">#&gt; 5 CUENCA DEL RIO MALACATOS EN LOJA     140</span></span>
<span><span class="co">#&gt; 6                          CASACAY     140</span></span>
<span><span class="co">#&gt;            Fecha_Hora</span></span>
<span><span class="co">#&gt; 1 2021-09-19 01:15:12</span></span>
<span><span class="co">#&gt; 2 2021-09-10 16:20:21</span></span>
<span><span class="co">#&gt; 3 2021-09-24 10:28:11</span></span>
<span><span class="co">#&gt; 4 2021-09-23 05:21:08</span></span>
<span><span class="co">#&gt; 5 2021-09-14 17:13:52</span></span>
<span><span class="co">#&gt; 6 2021-08-27 18:33:30</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span></span>
<span><span class="co">#&gt;   ANIO_REPORT    PROVINCIA            CANTON         </span></span>
<span><span class="co">#&gt;  Min.   :2022   Length:63          Length:63         </span></span>
<span><span class="co">#&gt;  1st Qu.:2022   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Median :2022   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;  Mean   :2022                                        </span></span>
<span><span class="co">#&gt;  3rd Qu.:2022                                        </span></span>
<span><span class="co">#&gt;  Max.   :2022                                        </span></span>
<span><span class="co">#&gt;                                                      </span></span>
<span><span class="co">#&gt;   PARROQUIA            EVENTO           CAT_EVENTO       </span></span>
<span><span class="co">#&gt;  Length:63          Length:63          Length:63         </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;   NIVEL_INF          CALIF_EVEN         CAT_CRUCE        </span></span>
<span><span class="co">#&gt;  Length:63          Length:63          Length:63         </span></span>
<span><span class="co">#&gt;  Class :character   Class :character   Class :character  </span></span>
<span><span class="co">#&gt;  Mode  :character   Mode  :character   Mode  :character  </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;                                                          </span></span>
<span><span class="co">#&gt;      NAM               AREA_HA      </span></span>
<span><span class="co">#&gt;  Length:63          Min.   :  10.0  </span></span>
<span><span class="co">#&gt;  Class :character   1st Qu.:  10.0  </span></span>
<span><span class="co">#&gt;  Mode  :character   Median :  10.0  </span></span>
<span><span class="co">#&gt;                     Mean   : 112.7  </span></span>
<span><span class="co">#&gt;                     3rd Qu.:  30.0  </span></span>
<span><span class="co">#&gt;                     Max.   :1500.0  </span></span>
<span><span class="co">#&gt;                     NA's   :4       </span></span>
<span><span class="co">#&gt;    Fecha_Hora                    </span></span>
<span><span class="co">#&gt;  Min.   :2021-02-13 06:49:19.00  </span></span>
<span><span class="co">#&gt;  1st Qu.:2021-08-05 07:44:18.00  </span></span>
<span><span class="co">#&gt;  Median :2021-09-09 13:35:15.00  </span></span>
<span><span class="co">#&gt;  Mean   :2021-09-05 18:19:12.97  </span></span>
<span><span class="co">#&gt;  3rd Qu.:2021-10-06 14:08:17.50  </span></span>
<span><span class="co">#&gt;  Max.   :2021-12-28 18:28:36.00  </span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p>Al observar el resumen del data frame, observamos que el la columna de área tenemos a NA, estos casilleros no tiene datos. Ahora supongamos que queremos eliminar las filas que no tienen datos de área afectada. (Ojo: No siempre se deberá borrar las filas que no tienen datos, dependerá del análisis que se quiera hacer)</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">incendio</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="va">incendio</span><span class="op">)</span></span></code></pre></div>
<p>Para el manejo de data frame tenemos una herramienta muy potente: la función <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code>. Dicha función permitir seleccionar filas y columnas a la vez, de la siguiente manera:</p>
<p><strong>x</strong>: Data frame de entrada.
<strong>subset</strong>: condición lógica que queramos usar para seleccionar las filas.
<strong>select</strong>: un vector que contenga el nombre de las columnas que queremos seleccionar (este argumento es necesario si queremos filtrar filas y columnas).</p>
<p>En nuestro ejemplo vamos a buscar datos de la provincia y el cantón que tengan área de afectación mayor a 5 kilómetros cuadraros y que estas áreas afectadas sean parte del Sistema Nacional de Áreas Protegidas snap.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Primero pasameros de HA a km2</span></span>
<span></span>
<span><span class="va">incendio</span><span class="op">$</span><span class="va">AREA_KM2</span> <span class="op">=</span> <span class="va">incendio</span><span class="op">$</span><span class="va">AREA_HA</span> <span class="op">*</span> <span class="fl">0.01</span></span>
<span></span>
<span><span class="co">#Ahora obtenemos los datos solicitados</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">incendio</span>, subset <span class="op">=</span> <span class="va">AREA_KM2</span> <span class="op">&gt;</span> <span class="fl">5</span> <span class="op">&amp;</span> <span class="va">CAT_CRUCE</span> <span class="op">==</span> <span class="st">"snap"</span>, select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">PROVINCIA</span>, <span class="va">CANTON</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;     PROVINCIA              CANTON</span></span>
<span><span class="co">#&gt; 56     GUAYAS           GUAYAQUIL</span></span>
<span><span class="co">#&gt; 58 TUNGURAHUA SANTIAGO DE PILLARO</span></span>
<span><span class="co">#&gt; 60   COTOPAXI             SALCEDO</span></span>
<span><span class="co">#&gt; 62     CARCHI              TULCAN</span></span></code></pre></div>
<div id="ejercicio-3" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> 📝 Ejercicio<a class="anchor" aria-label="anchor" href="#ejercicio-3"><i class="fas fa-link"></i></a>
</h2>
<p>Del paquete <code>datasets</code> almacene el conjunto de datos llamado <strong>airquality</strong> y obtenga los siguientes resultados. (Recuerde utilizar las herramientas que hemos aprendido, tambíen puede buscar otro camino, pero siempre a través de codificación)</p>
<ol style="list-style-type: decimal">
<li>En un data frame llamado <strong>calidad_mayo</strong> extraiga las 6 variables medidas para el mes de mayo.</li>
<li>Elimine del data frame <strong>calidad_mayo</strong> las filas que contengan NA en cualquiera de las variables</li>
<li>De la información que le quedó en <strong>calidad_mayo</strong> alamacene unicamente las filas en donde la velocidad el viento sea mayor a 10 y la temperatura menor a 70.</li>
<li>Calcule cuantas filas quedaron descartadas después de depurar la información de mayo.</li>
<li>Traduzque y Cambie los nombres de las columnas del data frame final de <strong>calidad_mayo</strong>
</li>
<li>Añada a los datos de mayo una columna con la fecha completa (recuerde que todas las observaciones son del año es del año 1973)</li>
</ol>
</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="data-frames.html"><span class="header-section-number">5</span> Data Frames</a></div>
<div class="next"><a href="funciones-b%C3%A1sicas.html"><span class="header-section-number">7</span> Funciones básicas</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#lectura-de-datos"><span class="header-section-number">6</span> Lectura de Datos</a></li>
<li><a class="nav-link" href="#ejercicio-3"><span class="header-section-number">6.1</span> 📝 Ejercicio</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/curso-aprendiendoR/curso_FICA.git/blob/master/06-Lectura_datos.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/curso-aprendiendoR/curso_FICA.git/edit/master/06-Lectura_datos.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>APRENDIENDO R</strong>" was written by Paola Guerrero. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
